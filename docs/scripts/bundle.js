!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r=function(){function e(e,t){this.baseData=e,this.cardData=t}return e.prototype.searchByCardIndex=function(e){var t,n;return n=(t=null!=e?this.cardData[parseInt(e)]:null)?this.baseData.GENERAL[parseInt(t.idx)]:null,{card:this._createLabeledCard(t),general:this._createLabeledGeneral(n)}},e.prototype._createLabeledCard=function(e){var t=this;if(!e)return null;var n=this.baseData.GEN_MAIN.filter(function(t){return t.key===e.gen_main}).map(function(e){return e.name_short})[0],r=[e.gen_sub0,e.gen_sub1,e.gen_sub2].filter(function(e){return""!==e}).map(function(e){return parseInt(e)}).map(function(e){return t.baseData.GEN_SUB[e].name_short}),i=e.hire_limit_date,s="1"===e.pocket;return{number:e.number,genMain:n,genSubs:r,hireLimitDate:i,pocket:s}},e.prototype._createLabeledGeneral=function(e){if(!e)return null;var t=this.baseData.PERSONAL[parseInt(e.personal)],n=this.baseData.STATE[parseInt(e.state)],r=e.major_version,i="Ex"===this.baseData.VER_TYPE[parseInt(e.ver_type)].name?"EX":e.add_version,s="0"===i?"第"+r+"弾":"第"+r+"弾-"+i,o="https://3594t.net/datalist/?v=GENERAL&amp;s=POPUP_GENERAL&amp;c="+e.code;return{name:t.name,rarity:e.rarity,stateName:n.name_short,version:s,url:o,major:r,minor:i}},e}(),i='\n<button id="close" style="width:100%;max-width:380px;height:30px;">Close</button>\n<h3>三国志大戦 解任ブックマークレット</h3>\n<button id="copy">選択した武将をコピー</button>\n<a href="https://3594t-touen.jp/recruitments/new" target="_blank">解任新規作成へ</a><small>(三国志大戦 桃園 に遷移します)</small>\n<div id="message" style="height: 30px;"></div>\n(ぽ)・・・ぽけっと武将\n<div style="padding-left:40px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;">\n<button id="select_all">すべて選択</button>\n<button id="clear_all">すべて解除</button>\n<input id="select_normal" type="checkbox" checked="checked" style="-ms-transform:scale(1.5,1.5);-webkit-transform:scale(1.5,1.5);transform:scale(1.5,1.5);"><label for="select_normal">アーケード</label>\n<input id="select_pocket" type="checkbox" checked="checked" style="-ms-transform:scale(1.5,1.5);-webkit-transform:scale(1.5,1.5);transform:scale(1.5,1.5);"><label for="select_pocket">ぽけっと</label>\n<button id="show_filter" style="display:none;">更に絞込</button>\n</div>\n<div id="filter" style="display:none;">\n<div style="margin-top: 10px;margin-bottom: 10px;">\n<input id="select_sr" type="checkbox" checked="checked" style="-ms-transform:scale(1.5,1.5);-webkit-transform:scale(1.5,1.5);transform:scale(1.5,1.5);"><label for="select_sr">SR</label>\n<input id="select_r" type="checkbox" checked="checked" style="-ms-transform:scale(1.5,1.5);-webkit-transform:scale(1.5,1.5);transform:scale(1.5,1.5);"><label for="select_r">R</label>\n<input id="select_other" type="checkbox" checked="checked" style="-ms-transform:scale(1.5,1.5);-webkit-transform:scale(1.5,1.5);transform:scale(1.5,1.5);"><label for="select_other">その他</label>\n</div>\n<div id="filter-versions" style="margin-bottom: 10px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;">\n</div>\n</div>\n<div id="main">\n</div>\n',s=function(e){if(e)for(;e.firstChild;)e.removeChild(e.firstChild)};Number.isNaN=Number.isNaN||function(e){return"number"==typeof e&&e!=e};var o=function(){function e(e){var t=e.createElement("iframe");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.width="90%",t.style.minWidth="480px",t.style.maxWidth="720px",t.style.height="98%",t.style.backgroundColor="white",t.style.zIndex="1000",e.body.appendChild(t),this.iframe=t,this.results=[],this.versionFilters={},this.filterCondition={verTypes:{normal:!0,pocket:!0},rarities:{sr:!0,r:!0,other:!0},versions:[]};var n=this.iframe.contentWindow;n&&(this._document=n.document,this._document.body.innerHTML=i),this._setupEvents()}return e.prototype._setupEvents=function(){var e=this,t=this._document.getElementById("close");t&&t.addEventListener("click",function(){e.hide()});var n=this._document.getElementById("copy");n&&n.addEventListener("click",function(){e._copy()});var r=this._document.getElementById("select_all");r&&r.addEventListener("click",function(){e._selectionChangeAll(!0)});var i=this._document.getElementById("clear_all");i&&i.addEventListener("click",function(){e._selectionChangeAll(!1)});var s=this._document.getElementById("select_normal"),o=this._document.getElementById("select_pocket");[s,o].forEach(function(t){t&&t.addEventListener("click",function(){e.filterCondition.verTypes={normal:!!s&&s.checked,pocket:!!o&&o.checked},e._updateSelectList()})});var a=this._document.getElementById("select_sr"),l=this._document.getElementById("select_r"),c=this._document.getElementById("select_other");[a,l,c].forEach(function(t){t&&t.addEventListener("click",function(){e.filterCondition.rarities={sr:!!a&&a.checked,r:!!l&&l.checked,other:!!c&&c.checked},e._updateSelectList()})});var d=this._document.getElementById("filter"),u=this._document.getElementById("show_filter");u&&u.addEventListener("click",function(){d&&(d.style.display="inline"),u.style.display="none"})},e.prototype.show=function(){this.iframe.style.display="block"},e.prototype.hide=function(){this.iframe.style.display="none"},e.prototype._selectionChangeAll=function(e){this.results.forEach(function(t){t.selected=e}),this._updateSelectList()},e.prototype._copy=function(){var e=this,t=this._getVisibleResults().filter(function(e){return e.selected});if(0!==t.length){var n=t.some(function(e){return e.card.pocket}),r=this._document.createElement("div");this._document.body.appendChild(r);var i=this._document.createElement("div"),s="武将名のリンクから登用ページへ行けます\n<br />";n&&(s+="(ぽ)・・・ぽけっと武将\n<br />"),i.innerHTML=s,r.appendChild(i);var o=function(e){return e.yyyy+"/"+e.MM+"/"+e.dd+" "+e.hh+":"+e.mm};this._partitionHideLimitGroup(t).forEach(function(t){var n=t.min,i=t.max,s=t.list,a=e._document.createElement("div");a.innerHTML=i!==n?"<br /><br />\n登用期限: "+e._dateFormat(n,o)+" - "+e._dateFormat(i,o):"<br /><br />\n登用期限: "+e._dateFormat(n,o),r.appendChild(a),s.forEach(function(t){var n=e._document.createElement("div");n.innerHTML=e._createCardInfoHtml(t,!1),r.appendChild(n)})});var a=this._document.createElement("div");a.innerHTML='<br /><br />\nこの投稿は 三国志大戦 解任ブックマークレット(<a href="https://boushi-bird.github.io/3594t-discard-bookmarklet/">https://boushi-bird.github.io/3594t-discard-bookmarklet/</a>)\nにより作成しています。',r.appendChild(a),this._document.body.appendChild(r);var l=this._document.getSelection();l&&l.selectAllChildren(r);var c=this._document.execCommand("copy");if(this._document.body.removeChild(r),c){var d=this._document.getElementById("message");d&&(d.innerHTML="<small>コピーしました!</small>"),setTimeout(function(){d&&(d.innerHTML="")},2e3)}}else window.alert("1つ以上選択する必要があります")},e.prototype._partitionHideLimitGroup=function(e){var t=null,n=[],r=function(e,t){return parseInt(e)-parseInt(t)},i=function(e){(function(e){return null==t||null==t.min||0!==r(t.min,e)})(e)&&(t={min:null,max:null,list:[]},n.push(t))};return e.forEach(function(e){var n=e.card.hireLimitDate;i(n),null!=t&&((null==t.min||r(t.min,n)>0)&&(t.min=n),(null==t.max||r(t.max,n)<0)&&(t.max=n),t.list.push(e))}),n},e.prototype.update=function(e,t){var n=this;this.results=[],this.versionFilters={},this.filterCondition.versions=[],e.forEach(function(e){var r=t.searchByCardIndex(e),i=r.card,s=r.general;if(i&&s){n.results.push({selected:!0,card:i,general:s});var o="第"+s.major+"段";if(!n.versionFilters[o]){var a=s.major;n.versionFilters[o]=a,n.filterCondition.versions.push(o)}}}),this._updateFilters(),this._updateSelectList()},e.prototype._getVisibleResults=function(){var e=this;return this.results.filter(function(t){var n=t.card.pocket,r=e.filterCondition.verTypes,i=r.normal,s=r.pocket;return n?s:i}).filter(function(t){var n=t.general.rarity,r=e.filterCondition.rarities,i=r.sr,s=r.r,o=r.other;return"SR"===n?i:"R"===n?s:o}).filter(function(t){var n=t.general.major;return e.filterCondition.versions.some(function(t){var r=e.versionFilters[t];return n===r})})},e.prototype._updateFilters=function(){var e=this,t=this._document.getElementById("filter-versions");s(t);var n=Object.keys(this.versionFilters);n.sort(function(t,n){return parseInt(e.versionFilters[t])-parseInt(e.versionFilters[n])}),n.forEach(function(n,r){var i="filter_v"+r,s=e._document.createElement("input");s.setAttribute("id",i),s.setAttribute("type","checkbox"),s.setAttribute("style","-ms-transform:scale(1.5,1.5);-webkit-transform:scale(1.5,1.5);transform:scale(1.5,1.5);"),s.checked=e.filterCondition.versions.indexOf(n)>=0,s.addEventListener("click",function(){var t=e.filterCondition.versions.filter(function(e){return e!==n});s.checked&&t.push(n),e.filterCondition.versions=t,e._updateSelectList()});var o=e._document.createElement("label");o.setAttribute("for",i),o.setAttribute("style","margin-right:10px;"),o.innerHTML=n,t&&t.appendChild(s),t&&t.appendChild(o)});var r=this._document.getElementById("filter"),i=this._document.getElementById("show_filter");i&&(n.length>0?i.style.display="inline":i.style.display="none"),r&&(r.style.display="none")},e.prototype._updateSelectList=function(){var e=this,t=this._document.getElementById("main");s(t),this._getVisibleResults().forEach(function(n){var r=e._document.createElement("div"),i=e._document.createElement("input");i.setAttribute("type","checkbox"),i.setAttribute("style","-ms-transform:scale(1.5,1.5);-webkit-transform:scale(1.5,1.5);transform:scale(1.5,1.5);"),i.style.width="24px",i.style.height="24px",i.style.margin="10px",i.checked=n.selected,i.addEventListener("click",function(){n.selected=i.checked});var s=e._document.createElement("span");s.style.verticalAlign="super",s.innerHTML=e._createCardInfoHtml(n),r.appendChild(i),r.appendChild(s),t&&t.appendChild(r)})},e.prototype._createCardInfoHtml=function(e,t){var n=e.card,r=e.general;void 0===t&&(t=!0);var i=n.genSubs.map(function(e){return e[0]}).join(""),s="";return t&&(s=" | 期限:"+this._dateFormat(n.hireLimitDate,function(e){return e.MM+"/"+e.dd+" "+e.hh+":"+e.mm})),n.number+"\n      "+(n.pocket?"(ぽ)":"")+" "+r.stateName+' <a href="'+r.url+'" target="_blank">'+r.version+" "+r.rarity+r.name+"</a>\n      "+n.genMain+" "+i+s},e.prototype._dateFormat=function(e,t){return e&&14===e.length?t({yyyy:e.substr(0,4),MM:e.substr(4,2),dd:e.substr(6,2),hh:e.substr(8,2),mm:e.substr(10,2),ss:e.substr(12,2)}):""},e}(),a=VsD8NEfx,l=new o(document),c=function(){if(!(window.member_card_fire_date&&window.member_data&&window.member_data.CARD&&window.base_data))return window.alert("[三国志大戦 解任ブックマークレット]\nデータを読み込み中またはデータリストのページではありません。"),void l.hide();l.show();var e=new r(window.base_data,window.member_data.CARD),t=window.member_card_fire_date.map(function(e){return e.index});l.update(t,e)};window[a]=c,c()}]);